<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta type="copyright" content="Copyright (C) 1996-2023 The Squid Software Foundation and contributors">
    <title>Squid 5.9 Configuration File: mark_client_connection</title>
    <meta name="keywords" content="squid squid.conf config configure mark_client_connection" />
    <meta name="description" content="Squid 5.9  mark_client_connection " />
    <link rel="stylesheet" type="text/css" href="http://www.squid-cache.org/default.css" />
    <link rel="stylesheet" type="text/css" href="http://www.squid-cache.org/cfgman.css" />
</head>

<body>
<div id="content">
  <p class="cfglinks">
  |&nbsp;<a href="index.html#toc_mark_client_connection">Index</a>&nbsp;
  |&nbsp;<a href="index_all.html#toc_mark_client_connection">Alphabetical Index</a>&nbsp;|
  </p>

  <table class="summary" summary="mark_client_connection">
    <tr>
      <th>Option Name:</th><td id="name"><a name="mark_client_connection">mark_client_connection</a></td>
    </tr>
    <tr>
      <th>Replaces:</th><td id="alias"></td>
    </tr>
    <tr>
      <th>Requires:</th><td id="requires">Packet MARK (Linux)</td>
    </tr>
    <tr>
      <th>Default Value:</th><td id="default">none
</td>
    </tr>
    <tr>
      <th>Suggested Config:</th>
      <td id="config">
<pre>

</pre>
      </td>
    </tr>
    <tr>
      <td id="detail" colspan="2">
<pre>
	Allows you to apply a Netfilter CONNMARK value to a connection
	on the client-side, based on an ACL.

	mark_client_connection mark-value[/mask] [!]aclname ...

	The mark-value and mask are unsigned integers (hex, octal, or decimal).
	The mask may be used to preserve marking previously set by other agents
	(e.g., iptables).

	A matching rule replaces the CONNMARK value. If a mask is also
	specified, then the masked bits of the original value are zeroed, and
	the configured mark-value is ORed with that adjusted value.
	For example, applying a mark-value 0xAB/0xF to 0x5F CONNMARK, results
	in a 0xFB marking (rather than a 0xAB or 0x5B).

	This directive semantics is similar to iptables --set-mark rather than
	--set-xmark functionality.

	The directive does not interfere with qos_flows (which uses packet MARKs,
	not CONNMARKs).

	Example where squid marks intercepted FTP connections:

	acl proto_ftp proto FTP
	mark_client_connection 0x200/0xff00 proto_ftp

	This clause only supports fast acl types.
	See http://wiki.squid-cache.org/SquidFaq/SquidAcl for details.

</pre>
      </td>
    </tr>
    <tr class="spacer"><td>&nbsp;</td></tr>
  </table>
  <p class="cfglinks">
  |&nbsp;<a href="index.html#toc_mark_client_connection">Index</a>&nbsp;
  |&nbsp;<a href="index_all.html#toc_mark_client_connection">Alphabetical Index</a>&nbsp;|
  </p>
  </div>

  </body>
</html>
