<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta type="copyright" content="Copyright (C) 1996-2024 The Squid Software Foundation and contributors">
    <title>Squid 6.13 Configuration File: proxy_protocol_access</title>
    <meta name="keywords" content="squid squid.conf config configure proxy_protocol_access" />
    <meta name="description" content="Squid 6.13  proxy_protocol_access " />
    <link rel="stylesheet" type="text/css" href="http://www.squid-cache.org/default.css" />
    <link rel="stylesheet" type="text/css" href="http://www.squid-cache.org/cfgman.css" />
</head>

<body>
<div id="content">
  <p class="cfglinks">
  |&nbsp;<a href="index.html#toc_proxy_protocol_access">Index</a>&nbsp;
  |&nbsp;<a href="index_all.html#toc_proxy_protocol_access">Alphabetical Index</a>&nbsp;|
  </p>

  <table class="summary" summary="proxy_protocol_access">
    <tr>
      <th>Option Name:</th><td id="name"><a name="proxy_protocol_access">proxy_protocol_access</a></td>
    </tr>
    <tr>
      <th>Replaces:</th><td id="alias"></td>
    </tr>
    <tr>
      <th>Requires:</th><td id="requires"></td>
    </tr>
    <tr>
      <th>Default Value:</th><td id="default">all TCP connections to ports with require-proxy-header will be denied
</td>
    </tr>
    <tr>
      <th>Suggested Config:</th>
      <td id="config">
<pre>

</pre>
      </td>
    </tr>
    <tr>
      <td id="detail" colspan="2">
<pre>
	Determine which client proxies can be trusted to provide correct
	information regarding real client IP address using PROXY protocol.

	Requests may pass through a chain of several other proxies
	before reaching us. The original source details may by sent in:
		* HTTP message Forwarded header, or
		* HTTP message X-Forwarded-For header, or
		* PROXY protocol connection header.

	This directive is solely for validating new PROXY protocol
	connections received from a port flagged with require-proxy-header.
	It is checked only once after TCP connection setup.

	A deny match results in TCP connection closure.

	An allow match is required for Squid to permit the corresponding
	TCP connection, before Squid even looks for HTTP request headers.
	If there is an allow match, Squid starts using PROXY header information
	to determine the source address of the connection for all future ACL
	checks, logging, etc.

	SECURITY CONSIDERATIONS:

		Any host from which we accept client IP details can place
		incorrect information in the relevant header, and Squid
		will use the incorrect information as if it were the
		source address of the request.  This may enable remote
		hosts to bypass any access control restrictions that are
		based on the client's source addresses.

	This clause only supports fast acl types.
	See https://wiki.squid-cache.org/SquidFaq/SquidAcl for details.

</pre>
      </td>
    </tr>
    <tr class="spacer"><td>&nbsp;</td></tr>
  </table>
  <p class="cfglinks">
  |&nbsp;<a href="index.html#toc_proxy_protocol_access">Index</a>&nbsp;
  |&nbsp;<a href="index_all.html#toc_proxy_protocol_access">Alphabetical Index</a>&nbsp;|
  </p>
  </div>

  </body>
</html>
